# FTC 平台未来规划（CTF 中心化路线）

定位：不仅是一场比赛的临时站点，而是长期运营的 CTF 平台，支持练习、比赛、社交、内容沉淀与安全运营。以下按方向拆分，每个板块含目标、核心内容与落地要点。

## 方向一：安全性增强

### 权限与访问控制
- 目标：确保最小权限与可审计的访问路径，覆盖比赛、题库、系统、社交等全域。
- 核心内容：权限分类与组合（细到操作级），角色/组映射；私有资源访问策略（白名单、邀请、审批）；敏感操作审批流。
- 落地要点：后台可视化配置与导出；权限变更审计；预置策略模板（比赛举办方、出题人、审计员）。

### 鉴权与会话安全
- 目标：减少盗号/会话劫持风险，支持多 IdP 接入。
- 核心内容：OAuth2/SSO（GitHub/GitLab/企业 IdP）；Refresh Token 轮换与设备指纹；主动下线/踢端；登录/重置密码防刷。
- 落地要点：前后端回调与绑定/解绑流程；多因素或二次验证策略；异常登录告警与封锁节奏。

### 输入、防护与风控
- 目标：抵御常见 Web 攻击与滥用，保证内容安全。
- 核心内容：富文本/附件/上传的类型与内容校验，敏感词与脚本过滤；提交/登录/接口节流；代理/同 IP 异常检测。
- 落地要点：统一输入网关与校验库；上传扫描与分片/秒传校验；风控策略可调（阈值、黑白名单、提示与封禁动作）。

### 审计与合规
- 目标：关键行为可追溯，便于事后定位与告警。
- 核心内容：权限变更、配置调整、题目版本操作、成绩调整、管理员动作的结构化日志；多渠道告警（邮件/钉钉/Slack）；WebSocket 鉴权/限流联动。
- 落地要点：日志集中/查询与导出；告警规则配置；慢查询与异常监控。

## 方向二：现有功能完善

### 战队体系
- 目标：让战队成为平台级实体，而非只绑定单场比赛。
- 核心内容：全局战队搜索与筛选（比赛、状态、人数、招募中/满员、标签）；战队公开页（简介、成员、历史战绩、招募状态）；加入申请/审批流、招募开关；我的战队汇总。
- 落地要点：战队索引与权限控制；队长工具（重置邀请码、审批、公告）；战队状态同步到报名/提交/榜单。

### 题库与比赛
- 目标：题目/题库长期可维护、可复用。
- 核心内容：题库导入/导出（含附件/镜像校验）；标签/难度/作者/更新时间搜索；题目版本管理（对比/回滚）；比赛配置模板一键复用。
- 落地要点：版本存储与差异查看；导入校验与失败回滚；比赛模板库与复制流程。

### 账号与登录
- 目标：降低登录壁垒，统一权限映射。
- 核心内容：OAuth2/SSO 登录/绑定/解绑；不同 IdP 角色映射到平台权限组；安全提醒（异常登录、设备管理）。
- 落地要点：前端登录流程适配；后台映射配置界面；账号合并与冲突处理策略。

### 内容与运营
- 目标：让题解、讨论、公告形成知识沉淀。
- 核心内容：题解发布、讨论区、点赞/收藏/分享；审核与敏感词过滤；公告模板、赛前/赛后广播；成绩单/榜单导出。
- 落地要点：内容审核队列与后台管理；可配置的公开/私有讨论；导出格式与大数据量分页。

## 方向三：性能与体验

### 高并发与弹性
- 目标：比赛高峰与多赛并行下保持稳定。
- 核心内容：热点接口缓存（榜单/提交结果/提示）、异步化判题与通知；Redis/队列优化；WebSocket 多节点广播与降级方案。
- 落地要点：缓存失效策略与分片；提交/榜单节流；容灾与回退（长轮询、静态快照）。

### 前端体验
- 目标：交互流畅、反馈明确。
- 核心内容：骨架屏/占位加载、统一空/错状态；上传分片/秒传；UI 主题、暗/亮适配；大列表虚拟化。
- 落地要点：组件库规范与复用；WebSocket 断线重连策略封装；移动端适配。

### 观测与运维
- 目标：可视、可告警、可调优。
- 核心内容：Prometheus 指标暴露（请求/任务/队列/WS/靶机）；慢查询/异常采样；靶机/镜像健康检查与自动清理。
- 落地要点：告警阈值与分级；运维面板（运行时配置、开关、重载）；日志/指标联动查询。

## 方向四：新实用功能（社交与内容沉淀）

### 社交关系与消息
- 目标：让选手之间形成网络，增加平台粘性。
- 核心内容：单向关注 → 双向好友 → 私信/群聊（分阶段）；拉黑/举报与反滥用；通知中心（关注动态、招募、题解、战队变更）。
- 落地要点：关系图与权限（陌生人/关注/好友的可见范围）；消息存储/撤回/举报流；节流与风控策略。

### 选手/战队主页
- 目标：展示实力与历史，支持社交入口。
- 核心内容：个人/战队主页（战绩、徽章、时间线、公开题解/讨论）；战队公告与招募位；可选择公开度。
- 落地要点：主页模板与隐私设置；战绩数据汇总接口；分享链接与 SEO。

### 题解、讨论与搜索
- 目标：把比赛内容转化为长期可检索的知识库。
- 核心内容：题解与讨论按题目/比赛聚合；搜索（关键词、标签、难度、作者、热度）；点赞/收藏/推荐；题解关联“一键复现”（个人练习靶机）。
- 落地要点：内容审核与敏感信息识别；推荐规则与排序；练习靶机配额与回收。

### 练习房与复盘
- 目标：提供赛后持续练习与复盘体验。
- 核心内容：公开练习房、赛后复盘模式（解题记录回放、提示/扣分展示）；错题本与再次挑战；个人/队伍成就与积分体系。
- 落地要点：练习房资源配额与调度；复盘数据存储与播放；成就规则可配置。

## 建议的推进节奏（示例）
- M1：安全与登录打底（OAuth2/SSO、权限配置、上传/富文本安全、关键操作审计）；战队全局搜索 MVP。
- M2：题解/讨论上线并可审核，题库搜索+导入导出完善，战队公开页与招募/审批；榜单/提交缓存与前端体验优化。
- M3：社交关系与通知 MVP，题目版本管理与回滚，练习房/复盘模式；多节点 WebSocket、观测与告警完善。
