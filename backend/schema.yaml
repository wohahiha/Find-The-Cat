openapi: 3.0.3
info:
  title: FTC API
  version: 1.0.0
paths:
  /api/accounts/auth/captcha/:
    get:
      operationId: api_accounts_auth_captcha_retrieve
      description: |-
        获取登录图形验证码：
        - 返回 captcha_key 与验证码图片 URL
        - 前端需输入验证码并连同 key 传给登录接口
      summary: 获取图形验证码
      tags:
      - accounts-auth
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CaptchaResponse'
          description: ''
  /api/accounts/auth/login/:
    post:
      operationId: api_accounts_auth_login_create
      description: |-
        登录流程：
        - 校验 identifier/password
        - 校验 captcha_key/captcha_code 图形验证码
        - 执行 LoginService 获取 token 与用户信息
        - 写入 HttpOnly JWT Cookie（可配置关闭）
      summary: 登录账户
      tags:
      - accounts-auth
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LoginRequest'
            examples:
              登录请求示例:
                value:
                  identifier: alice 或 alice@example.com
                  password: Passw0rd123
                  captcha_key: abcd1234
                  captcha_code: XyZ1
                description: captcha_key/captcha_code 由获取验证码接口返回与输入
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/LoginRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/LoginRequest'
        required: true
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LoginResponse'
              examples:
                登录请求示例:
                  value:
                    identifier: alice 或 alice@example.com
                    password: Passw0rd123
                    captcha_key: abcd1234
                    captcha_code: XyZ1
                  description: captcha_key/captcha_code 由获取验证码接口返回与输入
          description: ''
  /api/accounts/auth/password/change/:
    post:
      operationId: api_accounts_auth_password_change_create
      description: |-
        修改密码：
        - 校验旧密码、邮箱验证码、新密码与确认密码
        - 调用服务写入新密码
      summary: 修改密码
      tags:
      - accounts-password
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ChangePassword'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ChangePassword'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ChangePassword'
        required: true
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChangePasswordResponse'
          description: ''
  /api/accounts/auth/password/reset/:
    post:
      operationId: api_accounts_auth_password_reset_create
      description: |-
        重置密码：
        - 校验重置入参（邮箱/验证码/新密码）
        - 调用服务消费验证码并写入新密码
      summary: 重置密码
      tags:
      - accounts-password
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PasswordReset'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PasswordReset'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PasswordReset'
        required: true
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PasswordResetResponse'
          description: ''
  /api/accounts/auth/password/reset/request/:
    post:
      operationId: api_accounts_auth_password_reset_request_create
      description: |-
        申请重置：
        - 将场景设置为 RESET_PASSWORD
        - 调用发送验证码服务
      summary: 申请重置
      tags:
      - accounts-password
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PasswordResetRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PasswordResetRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PasswordResetRequest'
        required: true
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PasswordResetSendResponse'
          description: ''
  /api/accounts/auth/refresh/:
    post:
      operationId: api_accounts_auth_refresh_create
      description: 刷新访问令牌：使用 refresh 获取新的 access（可选返回 user）
      summary: 刷新访问令牌
      tags:
      - accounts-auth
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TokenRefreshRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/TokenRefreshRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/TokenRefreshRequest'
        required: true
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TokenRefreshResponse'
          description: ''
  /api/accounts/auth/register/:
    post:
      operationId: api_accounts_auth_register_create
      description: |-
        提交注册：
        - 校验注册入参
        - 执行注册服务，创建用户并分配默认权限
      summary: 注册账户
      tags:
      - accounts-auth
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RegisterRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/RegisterRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/RegisterRequest'
        required: true
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RegisterResponse'
          description: ''
  /api/accounts/email/change/:
    post:
      operationId: api_accounts_email_change_create
      description: |-
        修改邮箱：
        - 校验当前密码
        - 消费绑定邮箱验证码
        - 更新邮箱并返回最新资料
      summary: 修改邮箱
      tags:
      - accounts-email
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ChangeEmail'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ChangeEmail'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ChangeEmail'
        required: true
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChangeEmailResponse'
          description: ''
  /api/accounts/email/verification/:
    post:
      operationId: api_accounts_email_verification_create
      description: |-
        发送验证码：
        - 从请求体构建 SendEmailCodeSchema（自动校验）
        - 执行发送服务；DEBUG 下输出 debug_code 便于测试
      summary: 发送邮箱验证码
      tags:
      - accounts-email
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SendEmailCodeRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/SendEmailCodeRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/SendEmailCodeRequest'
        required: true
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SendEmailCodeResponse'
          description: ''
  /api/accounts/me/:
    get:
      operationId: api_accounts_me_retrieve
      description: 获取当前用户资料
      summary: 获取当前用户资料
      tags:
      - accounts-profile
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProfileDetailResponse'
          description: ''
    patch:
      operationId: api_accounts_me_partial_update
      description: |-
        部分更新个人资料：
        - 校验至少包含一个可更新字段
        - 调用更新服务后返回最新用户信息
      summary: 更新个人资料
      tags:
      - accounts-profile
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedProfileUpdate'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedProfileUpdate'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedProfileUpdate'
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProfileUpdateResponse'
          description: ''
  /api/accounts/me/avatar/:
    post:
      operationId: api_accounts_me_avatar_create
      description: |-
        上传并更新头像：
        - 校验图片类型与大小
        - 保存后返回头像 URL
      summary: 上传头像
      tags:
      - accounts-profile
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/AvatarUpload'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/AvatarUpload'
        required: true
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AvatarUploadResponse'
          description: ''
  /api/accounts/me/deactivate/:
    post:
      operationId: api_accounts_me_deactivate_create
      description: |-
        注销流程：
        - 校验当前密码
        - 调用服务进行软删除处理（禁用账号、清除可识别信息）
      summary: 注销账号
      tags:
      - accounts-profile
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DeleteAccount'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/DeleteAccount'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/DeleteAccount'
        required: true
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeleteAccountResponse'
          description: ''
  /api/accounts/password/change/:
    post:
      operationId: api_accounts_password_change_create
      description: |-
        修改密码：
        - 校验旧密码、邮箱验证码、新密码与确认密码
        - 调用服务写入新密码
      summary: 修改密码
      tags:
      - accounts-password
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ChangePassword'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ChangePassword'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ChangePassword'
        required: true
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChangePasswordResponse'
          description: ''
  /api/accounts/password/reset/:
    post:
      operationId: api_accounts_password_reset_create
      description: |-
        重置密码：
        - 校验重置入参（邮箱/验证码/新密码）
        - 调用服务消费验证码并写入新密码
      summary: 重置密码
      tags:
      - accounts-password
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PasswordReset'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PasswordReset'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PasswordReset'
        required: true
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PasswordResetResponse'
          description: ''
  /api/accounts/password/reset/request/:
    post:
      operationId: api_accounts_password_reset_request_create
      description: |-
        申请重置：
        - 将场景设置为 RESET_PASSWORD
        - 调用发送验证码服务
      summary: 申请重置
      tags:
      - accounts-password
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PasswordResetRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PasswordResetRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PasswordResetRequest'
        required: true
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PasswordResetSendResponse'
          description: ''
  /api/auth/permissions/:
    get:
      operationId: api_auth_permissions_list
      description: 权限字典：仅管理员可读
      summary: 权限字典
      tags:
      - auth
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Permission'
          description: ''
  /api/auth/roles/:
    get:
      operationId: api_auth_roles_list
      description: 角色管理：基于 Django Group
      summary: 角色列表
      tags:
      - auth
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Role'
          description: ''
    post:
      operationId: api_auth_roles_create
      description: 角色管理：基于 Django Group
      summary: 创建角色
      tags:
      - auth
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Role'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/Role'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/Role'
        required: true
      security:
      - JWTAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Role'
          description: ''
  /api/auth/roles/{id}/:
    get:
      operationId: api_auth_roles_retrieve
      description: 角色管理：基于 Django Group
      summary: 角色详情
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: 角色 ID
        required: true
      tags:
      - auth
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Role'
          description: ''
    put:
      operationId: api_auth_roles_update
      description: 角色管理：基于 Django Group
      summary: 更新角色
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: 角色 ID
        required: true
      tags:
      - auth
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Role'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/Role'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/Role'
        required: true
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Role'
          description: ''
    patch:
      operationId: api_auth_roles_partial_update
      description: 角色管理：基于 Django Group
      summary: 部分更新角色
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: 角色 ID
        required: true
      tags:
      - auth
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedRole'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedRole'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedRole'
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Role'
          description: ''
    delete:
      operationId: api_auth_roles_destroy
      description: 角色管理：基于 Django Group
      summary: 删除角色
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: 角色 ID
        required: true
      tags:
      - auth
      security:
      - JWTAuth: []
      responses:
        '204':
          description: No response body
  /api/contests/:
    get:
      operationId: contest_list
      description: 比赛列表/创建接口：GET 公共访问，POST 仅管理员
      summary: 比赛列表
      parameters:
      - in: query
        name: page
        schema:
          type: integer
        description: 页码（从 1 开始）
      - in: query
        name: page_size
        schema:
          type: integer
        description: 每页条数
      - in: query
        name: status
        schema:
          type: string
          enum:
          - ended
          - running
          - upcoming
        description: 比赛状态过滤
      tags:
      - contests
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ContestListResponse'
          description: ''
  /api/contests/{contest_slug}/:
    get:
      operationId: contest_detail
      description: 比赛详情接口：返回比赛、挑战、公告、记分板及我的队伍
      summary: 比赛详情
      parameters:
      - in: path
        name: contest_slug
        schema:
          type: string
        required: true
      tags:
      - contests
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ContestDetailResponse'
          description: ''
  /api/contests/{contest_slug}/announcements/:
    get:
      operationId: contests_announcements_list
      description: |-
        比赛公告接口：
        - GET：任何人可查看比赛公告列表
        - POST：管理员创建公告
      summary: 比赛公告列表
      parameters:
      - in: path
        name: contest_slug
        schema:
          type: string
        required: true
      - in: query
        name: page
        schema:
          type: integer
        description: 页码（从 1 开始）
      - in: query
        name: page_size
        schema:
          type: integer
        description: 每页条数
      tags:
      - contests
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnnouncementListResponse'
          description: ''
  /api/contests/{contest_slug}/announcements/{announcement_id}/:
    get:
      operationId: contests_announcements_detail
      description: 比赛公告详情：需登录查看指定公告
      summary: 比赛公告详情
      parameters:
      - in: path
        name: announcement_id
        schema:
          type: integer
        required: true
      - in: path
        name: contest_slug
        schema:
          type: string
        required: true
      tags:
      - contests
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnnouncementDetailResponse'
          description: ''
  /api/contests/{contest_slug}/categories/:
    get:
      operationId: api_contests_categories_retrieve
      description: |-
        比赛题目分类管理：
        - GET：公开查询比赛下的题目分类列表
        - PATCH：管理员更新题目分类
      summary: 比赛题目分类列表
      parameters:
      - in: path
        name: contest_slug
        schema:
          type: string
        required: true
      tags:
      - contests
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ContestCategoryListResponse'
          description: ''
  /api/contests/{contest_slug}/challenges/:
    get:
      operationId: challenge_list
      description: 题目列表/创建接口：GET 需登录查看，POST 需管理员创建
      summary: 题目列表
      parameters:
      - in: path
        name: contest_slug
        schema:
          type: string
        required: true
      tags:
      - challenges
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChallengeListResponse'
          description: ''
  /api/contests/{contest_slug}/challenges/{challenge_slug}/:
    get:
      operationId: challenge_detail
      description: 题目详情/更新接口：GET 需登录查看，PATCH 需管理员更新
      summary: 题目详情
      parameters:
      - in: path
        name: challenge_slug
        schema:
          type: string
        required: true
      - in: path
        name: contest_slug
        schema:
          type: string
        required: true
      tags:
      - challenges
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChallengeDetailResponse'
          description: ''
  /api/contests/{contest_slug}/challenges/{challenge_slug}/attachments/{attachment_id}/download/:
    get:
      operationId: api_contests_challenges_attachments_download_retrieve
      description: 题目附件下载：需登录，返回附件下载 URL
      summary: 下载题目附件
      parameters:
      - in: path
        name: attachment_id
        schema:
          type: integer
        required: true
      - in: path
        name: challenge_slug
        schema:
          type: string
        required: true
      - in: path
        name: contest_slug
        schema:
          type: string
        required: true
      tags:
      - challenges
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChallengeAttachmentDownloadResponse'
          description: ''
  /api/contests/{contest_slug}/challenges/{challenge_slug}/hints/:
    get:
      operationId: api_contests_challenges_hints_retrieve
      description: 题目提示列表：需登录，未解锁提示不返回内容
      summary: 提示列表
      parameters:
      - in: path
        name: challenge_slug
        schema:
          type: string
        required: true
      - in: path
        name: contest_slug
        schema:
          type: string
        required: true
      tags:
      - challenges
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChallengeHintListResponse'
          description: ''
  /api/contests/{contest_slug}/challenges/{challenge_slug}/hints/{hint_id}/unlock/:
    post:
      operationId: api_contests_challenges_hints_unlock_create
      description: 解锁提示：需登录，扣分提示需先解锁
      summary: 解锁提示
      parameters:
      - in: path
        name: challenge_slug
        schema:
          type: string
        required: true
      - in: path
        name: contest_slug
        schema:
          type: string
        required: true
      - in: path
        name: hint_id
        schema:
          type: integer
        required: true
      tags:
      - challenges
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChallengeHintUnlockResponse'
          description: ''
  /api/contests/{contest_slug}/challenges/attachments/upload/:
    post:
      operationId: contest_challenge_attachment_upload
      description: 管理员上传题目附件（需 challenges.manage_contest_attachment 权限）
      summary: 上传题目附件
      parameters:
      - in: path
        name: contest_slug
        schema:
          type: string
        required: true
      tags:
      - challenges
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ContestAttachmentUploadRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ContestAttachmentUploadRequest'
        required: true
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ContestAttachmentUploadResponse'
          description: ''
  /api/contests/{contest_slug}/register/:
    post:
      operationId: contest_register
      description: 报名后生成/更新参赛记录，未开赛为已报名，开赛后为进行中
      summary: 报名参赛
      parameters:
      - in: path
        name: contest_slug
        schema:
          type: string
        required: true
      tags:
      - contests
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ContestRegisterResponse'
          description: ''
  /api/contests/{contest_slug}/submissions/:
    get:
      operationId: api_contests_submissions_retrieve
      description: |-
        查看当前用户的提交记录：
        - scope=personal（默认）：仅本人提交
        - scope=team（组队赛）：查看所在队伍的提交
      summary: 我的提交记录
      parameters:
      - in: path
        name: contest_slug
        schema:
          type: string
        required: true
      - in: query
        name: page
        schema:
          type: integer
        description: 页码（从 1 开始）
      - in: query
        name: page_size
        schema:
          type: integer
        description: 每页条数
      - in: query
        name: scope
        schema:
          type: string
          enum:
          - personal
          - team
        description: 提交记录范围，组队赛可选 team
      tags:
      - submissions
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ContestSubmissionListResponse'
          description: ''
    post:
      operationId: api_contests_submissions_create
      description: 比赛作用域内提交 Flag
      summary: 比赛内提交 Flag
      parameters:
      - in: path
        name: contest_slug
        schema:
          type: string
        required: true
      tags:
      - submissions
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ContestSubmissionRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ContestSubmissionRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ContestSubmissionRequest'
        required: true
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ContestSubmissionResponse'
          description: ''
  /api/contests/{contest_slug}/teams/:
    get:
      operationId: api_contests_teams_retrieve
      description: 比赛队伍列表 / 创建接口：需登录
      summary: 比赛队伍列表
      parameters:
      - in: path
        name: contest_slug
        schema:
          type: string
        required: true
      - in: query
        name: page
        schema:
          type: integer
        description: 页码（从 1 开始）
      - in: query
        name: page_size
        schema:
          type: integer
        description: 每页条数
      tags:
      - teams
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ContestTeamListResponse'
          description: ''
    post:
      operationId: api_contests_teams_create
      description: 比赛队伍列表 / 创建接口：需登录
      summary: 创建队伍
      parameters:
      - in: path
        name: contest_slug
        schema:
          type: string
        required: true
      tags:
      - teams
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TeamCreateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/TeamCreateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/TeamCreateRequest'
        required: true
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TeamCreateResponse'
          description: ''
  /api/contests/{contest_slug}/teams/join/:
    post:
      operationId: api_contests_teams_join_create
      description: 加入队伍接口：需登录，通过邀请码加入
      summary: 加入队伍
      parameters:
      - in: path
        name: contest_slug
        schema:
          type: string
        required: true
      tags:
      - teams
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TeamJoinRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/TeamJoinRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/TeamJoinRequest'
        required: true
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TeamJoinResponse'
          description: ''
  /api/contests/{contest_slug}/teams/leave/:
    post:
      operationId: api_contests_teams_leave_create
      description: 退出队伍接口：需登录，队长多人时需先转移/解散
      summary: 退出队伍
      parameters:
      - in: path
        name: contest_slug
        schema:
          type: string
        required: true
      tags:
      - teams
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TeamLeaveResponse'
          description: ''
  /api/contests/announcements/:
    get:
      operationId: announcement_list_global
      description: 全局公告列表：可选按比赛过滤，公开访问
      summary: 全局公告列表
      parameters:
      - in: query
        name: contest
        schema:
          type: string
        description: 可选比赛标识（slug），为空则返回所有公告
      - in: query
        name: page
        schema:
          type: integer
        description: 页码（从 1 开始）
      - in: query
        name: page_size
        schema:
          type: integer
        description: 每页条数
      tags:
      - contests
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnnouncementListGlobalResponse'
          description: ''
  /api/contests/teams/{team_id}/disband/:
    post:
      operationId: api_contests_teams_disband_create
      description: 解散队伍接口：需登录，队长或管理员可操作
      summary: 解散队伍
      parameters:
      - in: path
        name: team_id
        schema:
          type: integer
        required: true
      tags:
      - teams
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TeamDisbandResponse'
          description: ''
  /api/contests/teams/{team_id}/invite/reset/:
    post:
      operationId: api_contests_teams_invite_reset_create
      description: |-
        重置队伍邀请码：
        - 队长或管理员操作
      summary: 重置队伍邀请码
      parameters:
      - in: path
        name: team_id
        schema:
          type: integer
        required: true
      tags:
      - teams
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TeamInviteResetResponse'
          description: ''
  /api/contests/teams/{team_id}/transfer/:
    post:
      operationId: api_contests_teams_transfer_create
      description: |-
        队长移交：
        - 队长或管理员可操作，将队长角色转给指定队员
      summary: 队长移交
      parameters:
      - in: path
        name: team_id
        schema:
          type: integer
        required: true
      tags:
      - teams
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TeamTransferRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/TeamTransferRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/TeamTransferRequest'
        required: true
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TeamTransferResponse'
          description: ''
  /api/contests/teams/mine/:
    get:
      operationId: api_contests_teams_mine_retrieve
      description: 我的战队列表（跨比赛）：返回我参与过或正在参与的队伍
      summary: 我的战队列表
      tags:
      - teams
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MyTeamsResponse'
          description: ''
  /api/machines/:
    get:
      operationId: api_machines_retrieve
      description: |-
        靶机列表/启动接口：
        - GET：查询当前用户的靶机实例
        - POST：为指定比赛/题目启动靶机
      summary: 我的靶机列表
      parameters:
      - in: query
        name: page
        schema:
          type: integer
        description: 页码（从 1 开始）
      - in: query
        name: page_size
        schema:
          type: integer
        description: 每页条数
      tags:
      - machines
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MachineListResponse'
          description: ''
    post:
      operationId: api_machines_create
      description: |-
        靶机列表/启动接口：
        - GET：查询当前用户的靶机实例
        - POST：为指定比赛/题目启动靶机
      summary: 启动靶机
      tags:
      - machines
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MachineStartRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/MachineStartRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/MachineStartRequest'
        required: true
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MachineStartResponse'
          description: ''
  /api/machines/{machine_id}/extend/:
    post:
      operationId: api_machines_extend_create
      description: |-
        延长靶机运行时间：
        - 仅运行中的实例可延长
      summary: 延长靶机运行时间
      parameters:
      - in: path
        name: machine_id
        schema:
          type: integer
        required: true
      tags:
      - machines
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MachineExtendRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/MachineExtendRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/MachineExtendRequest'
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MachineExtendResponse'
          description: ''
  /api/machines/{machine_id}/stop/:
    post:
      operationId: api_machines_stop_create
      description: |-
        靶机停止接口：
        - POST：停止指定实例
      summary: 停止靶机
      parameters:
      - in: path
        name: machine_id
        schema:
          type: integer
        required: true
      tags:
      - machines
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MachineStopResponse'
          description: ''
  /api/notifications/:
    get:
      operationId: notification_list
      description: 通知列表：默认全部，可按未读过滤
      summary: 通知列表
      parameters:
      - in: query
        name: page
        schema:
          type: integer
        description: 页码（从 1 开始）
      - in: query
        name: page_size
        schema:
          type: integer
        description: 每页条数
      - in: query
        name: status
        schema:
          type: string
          enum:
          - all
          - unread
        description: 筛选状态：unread/all（默认 all）
      tags:
      - notifications
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NotificationListResponse'
          description: ''
  /api/notifications/{notification_id}/read/:
    post:
      operationId: notification_mark_read
      description: 标记单条通知已读
      summary: 标记通知已读
      parameters:
      - in: path
        name: notification_id
        schema:
          type: integer
        required: true
      tags:
      - notifications
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NotificationMarkReadResponse'
          description: ''
  /api/notifications/mark-all-read/:
    post:
      operationId: notification_mark_all_read
      description: 标记全部通知为已读
      summary: 全部标记为已读
      tags:
      - notifications
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NotificationMarkAllReadResponse'
          description: ''
  /api/notifications/unread-count/:
    get:
      operationId: notification_unread_count
      description: 未读计数
      summary: 未读通知数量
      tags:
      - notifications
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NotificationUnreadCountResponse'
          description: ''
  /api/problem-bank/:
    get:
      operationId: problem_bank_list
      description: 题库列表/创建：GET 登录可见公开题库，POST 管理员创建题库
      summary: 题库列表
      parameters:
      - in: query
        name: author
        schema:
          type: integer
        description: 作者用户ID过滤
      - in: query
        name: bank_keyword
        schema:
          type: string
        description: 按题库名模糊搜索
      - in: query
        name: category_keyword
        schema:
          type: string
        description: 按题目类型（分类名）模糊搜索
      - in: query
        name: challenge_keyword
        schema:
          type: string
        description: 按题目名模糊搜索
      - in: query
        name: difficulty
        schema:
          type: string
        description: 难度过滤（easy/medium/hard）
      - in: query
        name: is_public
        schema:
          type: boolean
        description: 是否公开
      - in: query
        name: keyword
        schema:
          type: string
        description: 模糊搜索关键字（兼容旧版 search_scope）
      - in: query
        name: page
        schema:
          type: integer
        description: 页码（从 1 开始）
      - in: query
        name: page_size
        schema:
          type: integer
        description: 每页条数
      - in: query
        name: search_scope
        schema:
          type: string
        description: 兼容旧版：bank/challenge/category
      - in: query
        name: tags
        schema:
          type: string
        description: 标签列表，逗号分隔
      - in: query
        name: updated_after
        schema:
          type: string
          format: date-time
        description: '更新时间 >= '
      - in: query
        name: updated_before
        schema:
          type: string
          format: date-time
        description: 更新时间 <=
      tags:
      - problem-bank
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProblemBankListResponse'
          description: ''
  /api/problem-bank/{bank_slug}/:
    get:
      operationId: problem_bank_challenge_list
      description: 题库题目列表：需登录，可见公开题库
      summary: 题库题目列表
      parameters:
      - in: path
        name: bank_slug
        schema:
          type: string
        required: true
      - in: query
        name: page
        schema:
          type: integer
        description: 页码（从 1 开始）
      - in: query
        name: page_size
        schema:
          type: integer
        description: 每页条数
      tags:
      - problem-bank
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BankChallengeListResponse'
          description: ''
  /api/problem-bank/{bank_slug}/{challenge_slug}/:
    get:
      operationId: problem_bank_challenge_detail
      description: 题库题目详情：需登录
      summary: 题库题目详情
      parameters:
      - in: path
        name: bank_slug
        schema:
          type: string
        required: true
      - in: path
        name: challenge_slug
        schema:
          type: string
        required: true
      tags:
      - problem-bank
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BankChallengeDetailResponse'
          description: ''
  /api/problem-bank/{bank_slug}/{challenge_slug}/submit/:
    post:
      operationId: api_problem_bank_submit_create
      description: 题库作答：需登录，不计分，仅记录解题状态
      summary: 题库内提交 Flag
      parameters:
      - in: path
        name: bank_slug
        schema:
          type: string
        required: true
      - in: path
        name: challenge_slug
        schema:
          type: string
        required: true
      tags:
      - submissions
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BankSubmitRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/BankSubmitRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/BankSubmitRequest'
        required: true
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BankSubmitResponse'
          description: ''
  /api/problem-bank/{bank_slug}/meta/:
    get:
      operationId: api_problem_bank_meta_retrieve
      description: 题库元信息查看/更新：GET 查看，PATCH 管理员更新
      summary: 题库详情
      parameters:
      - in: path
        name: bank_slug
        schema:
          type: string
        required: true
      tags:
      - problem-bank
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProblemBankDetailResponse'
          description: ''
  /api/schema/:
    get:
      operationId: api_schema_retrieve
      description: |-
        OpenApi3 schema for this API. Format can be selected via content negotiation.

        - YAML: application/vnd.oai.openapi
        - JSON: application/vnd.oai.openapi+json
      summary: OpenApi3 schema for this API. Format can be selected via content negotiation.
      parameters:
      - in: query
        name: format
        schema:
          type: string
          enum:
          - json
          - yaml
      - in: query
        name: lang
        schema:
          type: string
          enum:
          - af
          - ar
          - ar-dz
          - ast
          - az
          - be
          - bg
          - bn
          - br
          - bs
          - ca
          - ckb
          - cs
          - cy
          - da
          - de
          - dsb
          - el
          - en
          - en-au
          - en-gb
          - eo
          - es
          - es-ar
          - es-co
          - es-mx
          - es-ni
          - es-ve
          - et
          - eu
          - fa
          - fi
          - fr
          - fy
          - ga
          - gd
          - gl
          - he
          - hi
          - hr
          - hsb
          - hu
          - hy
          - ia
          - id
          - ig
          - io
          - is
          - it
          - ja
          - ka
          - kab
          - kk
          - km
          - kn
          - ko
          - ky
          - lb
          - lt
          - lv
          - mk
          - ml
          - mn
          - mr
          - ms
          - my
          - nb
          - ne
          - nl
          - nn
          - os
          - pa
          - pl
          - pt
          - pt-br
          - ro
          - ru
          - sk
          - sl
          - sq
          - sr
          - sr-latn
          - sv
          - sw
          - ta
          - te
          - tg
          - th
          - tk
          - tr
          - tt
          - udm
          - ug
          - uk
          - ur
          - uz
          - vi
          - zh-hans
          - zh-hant
      tags:
      - schema
      security:
      - JWTAuth: []
      - {}
      responses:
        '200':
          content:
            application/vnd.oai.openapi:
              schema:
                type: object
                additionalProperties: {}
            application/yaml:
              schema:
                type: object
                additionalProperties: {}
            application/vnd.oai.openapi+json:
              schema:
                type: object
                additionalProperties: {}
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
  /api/system/public/brand/:
    get:
      operationId: api_system_public_brand_retrieve
      description: 平台前台展示的站点品牌名，默认为 'Find The Cat'
      summary: 获取站点品牌名
      tags:
      - system
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PublicBrandResponse'
          description: ''
  /health/:
    get:
      operationId: health_retrieve
      description: 返回简单 OK 状态
      summary: 健康检查
      tags:
      - health
      security:
      - JWTAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HealthCheckResponse'
          description: ''
components:
  schemas:
    Announcement:
      type: object
      properties:
        id:
          type: integer
        contest:
          type: string
        title:
          type: string
        summary:
          type: string
        content:
          type: string
        is_active:
          type: boolean
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
      required:
      - content
      - contest
      - id
      - is_active
      - summary
      - title
    AnnouncementDetailData:
      type: object
      properties:
        announcement:
          $ref: '#/components/schemas/Announcement'
      required:
      - announcement
    AnnouncementDetailResponse:
      type: object
      properties:
        data:
          $ref: '#/components/schemas/AnnouncementDetailData'
        code:
          type: integer
          description: 业务状态码，0 表示成功
        message:
          type: string
          description: 提示信息
        extra:
          type: object
          additionalProperties: {}
          nullable: true
          description: 附加信息
      required:
      - code
      - data
      - message
    AnnouncementListData:
      type: object
      properties:
        items:
          $ref: '#/components/schemas/Announcement'
      required:
      - items
    AnnouncementListGlobalData:
      type: object
      properties:
        items:
          $ref: '#/components/schemas/Announcement'
      required:
      - items
    AnnouncementListGlobalResponse:
      type: object
      properties:
        extra:
          $ref: '#/components/schemas/PaginationMeta'
        data:
          $ref: '#/components/schemas/AnnouncementListGlobalData'
        code:
          type: integer
          description: 业务状态码，0 表示成功
        message:
          type: string
          description: 提示信息
      required:
      - code
      - data
      - extra
      - message
    AnnouncementListResponse:
      type: object
      properties:
        extra:
          $ref: '#/components/schemas/PaginationMeta'
        data:
          $ref: '#/components/schemas/AnnouncementListData'
        code:
          type: integer
          description: 业务状态码，0 表示成功
        message:
          type: string
          description: 提示信息
      required:
      - code
      - data
      - extra
      - message
    AttachmentInfo:
      type: object
      properties:
        path:
          type: string
          description: 存储相对路径
        url:
          type: string
          description: 附件访问 URL
      required:
      - path
      - url
    AvatarUpload:
      type: object
      properties:
        avatar:
          type: string
          format: uri
          description: 头像图片文件
      required:
      - avatar
    AvatarUploadData:
      type: object
      properties:
        avatar:
          type: string
          description: 头像访问 URL
      required:
      - avatar
    AvatarUploadResponse:
      type: object
      properties:
        data:
          $ref: '#/components/schemas/AvatarUploadData'
        code:
          type: integer
          description: 业务状态码，0 表示成功
        message:
          type: string
          description: 提示信息
        extra:
          type: object
          additionalProperties: {}
          nullable: true
          description: 附加信息
      required:
      - code
      - data
      - message
    BankChallengeDetailData:
      type: object
      properties:
        challenge:
          $ref: '#/components/schemas/BankChallengeSummary'
      required:
      - challenge
    BankChallengeDetailResponse:
      type: object
      properties:
        data:
          $ref: '#/components/schemas/BankChallengeDetailData'
        code:
          type: integer
          description: 业务状态码，0 表示成功
        message:
          type: string
          description: 提示信息
        extra:
          type: object
          additionalProperties: {}
          nullable: true
          description: 附加信息
      required:
      - code
      - data
      - message
    BankChallengeListData:
      type: object
      properties:
        items:
          $ref: '#/components/schemas/BankChallengeSummary'
      required:
      - items
    BankChallengeListResponse:
      type: object
      properties:
        extra:
          $ref: '#/components/schemas/PaginationMeta'
        data:
          $ref: '#/components/schemas/BankChallengeListData'
        code:
          type: integer
          description: 业务状态码，0 表示成功
        message:
          type: string
          description: 提示信息
      required:
      - code
      - data
      - extra
      - message
    BankChallengeSummary:
      type: object
      properties:
        slug:
          type: string
        title:
          type: string
        short_description:
          type: string
        difficulty:
          type: string
        solved:
          type: boolean
      required:
      - slug
      - title
    BankSubmitData:
      type: object
      properties:
        solved_at:
          type: string
          format: date-time
          description: 解题时间
      required:
      - solved_at
    BankSubmitRequest:
      type: object
      properties:
        flag:
          type: string
          description: 提交的 Flag
      required:
      - flag
    BankSubmitResponse:
      type: object
      properties:
        data:
          $ref: '#/components/schemas/BankSubmitData'
        code:
          type: integer
          description: 业务状态码，0 表示成功
        message:
          type: string
          description: 提示信息
        extra:
          type: object
          additionalProperties: {}
          nullable: true
          description: 附加信息
      required:
      - code
      - data
      - message
    CaptchaData:
      type: object
      properties:
        captcha_key:
          type: string
        image_url:
          type: string
      required:
      - captcha_key
      - image_url
    CaptchaResponse:
      type: object
      properties:
        data:
          $ref: '#/components/schemas/CaptchaData'
        code:
          type: integer
          description: 业务状态码，0 表示成功
        message:
          type: string
          description: 提示信息
        extra:
          type: object
          additionalProperties: {}
          nullable: true
          description: 附加信息
      required:
      - code
      - data
      - message
    ChallengeAttachmentDownloadData:
      type: object
      properties:
        name:
          type: string
          description: 附件名称
        url:
          type: string
          description: 附件下载 URL
      required:
      - name
      - url
    ChallengeAttachmentDownloadResponse:
      type: object
      properties:
        data:
          $ref: '#/components/schemas/ChallengeAttachmentDownloadData'
        code:
          type: integer
          description: 业务状态码，0 表示成功
        message:
          type: string
          description: 提示信息
        extra:
          type: object
          additionalProperties: {}
          nullable: true
          description: 附加信息
      required:
      - code
      - data
      - message
    ChallengeDetailData:
      type: object
      properties:
        challenge:
          $ref: '#/components/schemas/ChallengeSummary'
      required:
      - challenge
    ChallengeDetailResponse:
      type: object
      properties:
        data:
          $ref: '#/components/schemas/ChallengeDetailData'
        code:
          type: integer
          description: 业务状态码，0 表示成功
        message:
          type: string
          description: 提示信息
        extra:
          type: object
          additionalProperties: {}
          nullable: true
          description: 附加信息
      required:
      - code
      - data
      - message
    ChallengeHintListData:
      type: object
      properties:
        items:
          $ref: '#/components/schemas/HintItem'
      required:
      - items
    ChallengeHintListResponse:
      type: object
      properties:
        data:
          $ref: '#/components/schemas/ChallengeHintListData'
        code:
          type: integer
          description: 业务状态码，0 表示成功
        message:
          type: string
          description: 提示信息
        extra:
          type: object
          additionalProperties: {}
          nullable: true
          description: 附加信息
      required:
      - code
      - data
      - message
    ChallengeHintUnlockData:
      type: object
      properties:
        hint:
          $ref: '#/components/schemas/HintItem'
      required:
      - hint
    ChallengeHintUnlockResponse:
      type: object
      properties:
        data:
          $ref: '#/components/schemas/ChallengeHintUnlockData'
        code:
          type: integer
          description: 业务状态码，0 表示成功
        message:
          type: string
          description: 提示信息
        extra:
          type: object
          additionalProperties: {}
          nullable: true
          description: 附加信息
      required:
      - code
      - data
      - message
    ChallengeListData:
      type: object
      properties:
        items:
          $ref: '#/components/schemas/ChallengeSummary'
      required:
      - items
    ChallengeListResponse:
      type: object
      properties:
        data:
          $ref: '#/components/schemas/ChallengeListData'
        code:
          type: integer
          description: 业务状态码，0 表示成功
        message:
          type: string
          description: 提示信息
        extra:
          type: object
          additionalProperties: {}
          nullable: true
          description: 附加信息
      required:
      - code
      - data
      - message
    ChallengeSummary:
      type: object
      properties:
        slug:
          type: string
          description: 题目标识
        title:
          type: string
          description: 题目标题
        category:
          type: string
          nullable: true
          description: 分类
        current_points:
          type: integer
          description: 当前可得分
        difficulty:
          type: string
        solved:
          type: boolean
          description: 是否已解（如有）
        has_machine:
          type: boolean
          description: 是否启用靶机
      required:
      - slug
      - title
    ChangeEmail:
      type: object
      properties:
        new_email:
          type: string
          format: email
        email_code:
          type: string
        current_password:
          type: string
      required:
      - current_password
      - email_code
      - new_email
    ChangeEmailData:
      type: object
      properties:
        user:
          $ref: '#/components/schemas/UserSummary'
      required:
      - user
    ChangeEmailResponse:
      type: object
      properties:
        data:
          $ref: '#/components/schemas/ChangeEmailData'
        code:
          type: integer
          description: 业务状态码，0 表示成功
        message:
          type: string
          description: 提示信息
        extra:
          type: object
          additionalProperties: {}
          nullable: true
          description: 附加信息
      required:
      - code
      - data
      - message
    ChangePassword:
      type: object
      properties:
        old_password:
          type: string
        email_code:
          type: string
        new_password:
          type: string
        confirm_password:
          type: string
      required:
      - confirm_password
      - email_code
      - new_password
      - old_password
    ChangePasswordResponse:
      type: object
      properties:
        code:
          type: integer
          description: 业务状态码，0 表示成功
        message:
          type: string
          description: 提示信息
        extra:
          type: object
          additionalProperties: {}
          nullable: true
          description: 附加信息
      required:
      - code
      - message
    ContestAttachmentUploadData:
      type: object
      properties:
        attachment:
          $ref: '#/components/schemas/AttachmentInfo'
      required:
      - attachment
    ContestAttachmentUploadRequest:
      type: object
      properties:
        file:
          type: string
          format: uri
          description: 附件文件（zip/tar/gz/7z/txt/pdf/md/json，10MB 内）
        challenge_slug:
          type: string
          description: 可选题目标识
      required:
      - file
    ContestAttachmentUploadResponse:
      type: object
      properties:
        data:
          $ref: '#/components/schemas/ContestAttachmentUploadData'
        code:
          type: integer
          description: 业务状态码，0 表示成功
        message:
          type: string
          description: 提示信息
        extra:
          type: object
          additionalProperties: {}
          nullable: true
          description: 附加信息
      required:
      - code
      - data
      - message
    ContestCategory:
      type: object
      properties:
        id:
          type: integer
        contest:
          type: string
        name:
          type: string
        slug:
          type: string
        description:
          type: string
      required:
      - id
      - name
      - slug
    ContestCategoryListData:
      type: object
      properties:
        items:
          $ref: '#/components/schemas/ContestCategory'
      required:
      - items
    ContestCategoryListResponse:
      type: object
      properties:
        data:
          $ref: '#/components/schemas/ContestCategoryListData'
        code:
          type: integer
          description: 业务状态码，0 表示成功
        message:
          type: string
          description: 提示信息
        extra:
          type: object
          additionalProperties: {}
          nullable: true
          description: 附加信息
      required:
      - code
      - data
      - message
    ContestDetailData:
      type: object
      properties:
        my_team:
          $ref: '#/components/schemas/TeamSummary'
        contest:
          $ref: '#/components/schemas/ContestSummary'
        challenges:
          type: array
          items:
            $ref: '#/components/schemas/ChallengeSummary'
        announcements:
          type: array
          items:
            $ref: '#/components/schemas/Announcement'
        scoreboard:
          type: array
          items:
            $ref: '#/components/schemas/ScoreboardEntry'
        my_scoreboard:
          allOf:
          - $ref: '#/components/schemas/ScoreboardEntry'
          nullable: true
      required:
      - announcements
      - challenges
      - contest
      - my_team
      - scoreboard
    ContestDetailResponse:
      type: object
      properties:
        data:
          $ref: '#/components/schemas/ContestDetailData'
        code:
          type: integer
          description: 业务状态码，0 表示成功
        message:
          type: string
          description: 提示信息
        extra:
          type: object
          additionalProperties: {}
          nullable: true
          description: 附加信息
      required:
      - code
      - data
      - message
    ContestListData:
      type: object
      properties:
        items:
          $ref: '#/components/schemas/ContestSummary'
      required:
      - items
    ContestListResponse:
      type: object
      properties:
        extra:
          $ref: '#/components/schemas/PaginationMeta'
        data:
          $ref: '#/components/schemas/ContestListData'
        code:
          type: integer
          description: 业务状态码，0 表示成功
        message:
          type: string
          description: 提示信息
      required:
      - code
      - data
      - extra
      - message
    ContestRegisterData:
      type: object
      properties:
        contest:
          $ref: '#/components/schemas/ContestSummary'
        status:
          type: string
          description: 报名状态
      required:
      - contest
      - status
    ContestRegisterResponse:
      type: object
      properties:
        data:
          $ref: '#/components/schemas/ContestRegisterData'
        code:
          type: integer
          description: 业务状态码，0 表示成功
        message:
          type: string
          description: 提示信息
        extra:
          type: object
          additionalProperties: {}
          nullable: true
          description: 附加信息
      required:
      - code
      - data
      - message
    ContestSubmissionData:
      type: object
      properties:
        challenge:
          $ref: '#/components/schemas/ChallengeSummary'
        submission:
          $ref: '#/components/schemas/SubmissionPayload'
        awarded_points:
          type: integer
          description: 总得分
        bonus_points:
          type: integer
          description: 额外加分
        solved_at:
          type: string
          format: date-time
          nullable: true
      required:
      - awarded_points
      - bonus_points
      - challenge
      - submission
    ContestSubmissionListData:
      type: object
      properties:
        items:
          $ref: '#/components/schemas/SubmissionPayload'
      required:
      - items
    ContestSubmissionListResponse:
      type: object
      properties:
        extra:
          $ref: '#/components/schemas/PaginationMeta'
        data:
          $ref: '#/components/schemas/ContestSubmissionListData'
        code:
          type: integer
          description: 业务状态码，0 表示成功
        message:
          type: string
          description: 提示信息
      required:
      - code
      - data
      - extra
      - message
    ContestSubmissionRequest:
      type: object
      properties:
        challenge_slug:
          type: string
          description: 题目标识
        flag:
          type: string
          description: 提交的 Flag
      required:
      - challenge_slug
      - flag
    ContestSubmissionResponse:
      type: object
      properties:
        data:
          $ref: '#/components/schemas/ContestSubmissionData'
        code:
          type: integer
          description: 业务状态码，0 表示成功
        message:
          type: string
          description: 提示信息
        extra:
          type: object
          additionalProperties: {}
          nullable: true
          description: 附加信息
      required:
      - code
      - data
      - message
    ContestSummary:
      type: object
      properties:
        slug:
          type: string
          description: 比赛标识
        name:
          type: string
          description: 比赛名称
        description:
          type: string
          description: 描述
        start_time:
          type: string
          format: date-time
          description: 开始时间
        end_time:
          type: string
          format: date-time
          description: 结束时间
        freeze_time:
          type: string
          format: date-time
          nullable: true
          description: 封榜时间
        registration_start_time:
          type: string
          format: date-time
          nullable: true
          description: 报名开始时间
        registration_end_time:
          type: string
          format: date-time
          nullable: true
          description: 报名截止时间
        status:
          type: string
          description: 状态
        is_team_based:
          type: boolean
          description: 是否组队赛
        max_team_members:
          type: integer
          nullable: true
          description: 最大队员数
        registration_status:
          type: boolean
          nullable: true
          description: 当前用户是否已报名（需登录时返回）
        registration_valid:
          type: boolean
          nullable: true
          description: 报名是否有效（团队赛未组队则为 False）
        my_team_id:
          type: integer
          nullable: true
          description: 当前用户在该比赛的队伍ID（组队赛且已加入时返回）
        my_team_name:
          type: string
          nullable: true
          description: 当前用户在该比赛的队伍名称
        user_badge:
          type: string
          nullable: true
          description: 用户侧副状态（registration_closed/registration_invalid/team_missing/frozen/finished/registered）
      required:
      - end_time
      - is_team_based
      - name
      - slug
      - start_time
      - status
    ContestTeamListData:
      type: object
      properties:
        items:
          $ref: '#/components/schemas/TeamSummary'
        contest:
          type: string
          description: 比赛标识
      required:
      - contest
      - items
    ContestTeamListResponse:
      type: object
      properties:
        extra:
          $ref: '#/components/schemas/PaginationMeta'
        data:
          $ref: '#/components/schemas/ContestTeamListData'
        code:
          type: integer
          description: 业务状态码，0 表示成功
        message:
          type: string
          description: 提示信息
      required:
      - code
      - data
      - extra
      - message
    DeleteAccount:
      type: object
      properties:
        password:
          type: string
      required:
      - password
    DeleteAccountResponse:
      type: object
      properties:
        code:
          type: integer
          description: 业务状态码，0 表示成功
        message:
          type: string
          description: 提示信息
        extra:
          type: object
          additionalProperties: {}
          nullable: true
          description: 附加信息
      required:
      - code
      - message
    HealthCheckData:
      type: object
      properties:
        status:
          type: string
      required:
      - status
    HealthCheckResponse:
      type: object
      properties:
        data:
          $ref: '#/components/schemas/HealthCheckData'
        code:
          type: integer
          description: 业务状态码，0 表示成功
        message:
          type: string
          description: 提示信息
        extra:
          type: object
          additionalProperties: {}
          nullable: true
          description: 附加信息
      required:
      - code
      - data
      - message
    HintItem:
      type: object
      properties:
        id:
          type: integer
          description: 提示 ID
        title:
          type: string
          description: 提示标题
        content:
          type: string
          description: 提示内容（未解锁可为空）
        order:
          type: integer
          description: 排序
      required:
      - title
    LoginData:
      type: object
      properties:
        user:
          $ref: '#/components/schemas/UserSummary'
        access:
          type: string
          description: 访问令牌
        refresh:
          type: string
          description: 刷新令牌
      required:
      - access
      - refresh
      - user
    LoginRequest:
      type: object
      properties:
        identifier:
          type: string
          description: 用户名或邮箱
        password:
          type: string
        captcha_key:
          type: string
        captcha_code:
          type: string
      required:
      - identifier
      - password
    LoginResponse:
      type: object
      properties:
        data:
          $ref: '#/components/schemas/LoginData'
        code:
          type: integer
          description: 业务状态码，0 表示成功
        message:
          type: string
          description: 提示信息
        extra:
          type: object
          additionalProperties: {}
          nullable: true
          description: 附加信息
      required:
      - code
      - data
      - message
    MachineExtendData:
      type: object
      properties:
        machine:
          $ref: '#/components/schemas/MachineInstance'
      required:
      - machine
    MachineExtendRequest:
      type: object
      properties:
        minutes:
          type: integer
          nullable: true
          description: 可选：本次延长的分钟数，不填使用默认值
    MachineExtendResponse:
      type: object
      properties:
        data:
          $ref: '#/components/schemas/MachineExtendData'
        code:
          type: integer
          description: 业务状态码，0 表示成功
        message:
          type: string
          description: 提示信息
        extra:
          type: object
          additionalProperties: {}
          nullable: true
          description: 附加信息
      required:
      - code
      - data
      - message
    MachineInstance:
      type: object
      properties:
        id:
          type: integer
        contest:
          type: string
        challenge:
          type: string
        user:
          type: integer
        team:
          type: integer
          nullable: true
        container_id:
          type: string
        host:
          type: string
        port:
          type: integer
        status:
          type: string
        extend_count:
          type: integer
        expires_at:
          type: string
          format: date-time
          nullable: true
        remaining_seconds:
          type: integer
          nullable: true
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
      required:
      - challenge
      - container_id
      - contest
      - created_at
      - host
      - id
      - port
      - status
      - updated_at
      - user
    MachineListData:
      type: object
      properties:
        items:
          $ref: '#/components/schemas/MachineInstance'
      required:
      - items
    MachineListResponse:
      type: object
      properties:
        extra:
          $ref: '#/components/schemas/PaginationMeta'
        data:
          $ref: '#/components/schemas/MachineListData'
        code:
          type: integer
          description: 业务状态码，0 表示成功
        message:
          type: string
          description: 提示信息
      required:
      - code
      - data
      - extra
      - message
    MachineStartData:
      type: object
      properties:
        machine:
          $ref: '#/components/schemas/MachineInstance'
      required:
      - machine
    MachineStartRequest:
      type: object
      properties:
        contest_slug:
          type: string
          description: 比赛标识
        challenge_slug:
          type: string
          description: 题目标识
      required:
      - challenge_slug
      - contest_slug
    MachineStartResponse:
      type: object
      properties:
        data:
          $ref: '#/components/schemas/MachineStartData'
        code:
          type: integer
          description: 业务状态码，0 表示成功
        message:
          type: string
          description: 提示信息
        extra:
          type: object
          additionalProperties: {}
          nullable: true
          description: 附加信息
      required:
      - code
      - data
      - message
    MachineStopData:
      type: object
      properties:
        machine:
          $ref: '#/components/schemas/MachineInstance'
      required:
      - machine
    MachineStopResponse:
      type: object
      properties:
        data:
          $ref: '#/components/schemas/MachineStopData'
        code:
          type: integer
          description: 业务状态码，0 表示成功
        message:
          type: string
          description: 提示信息
        extra:
          type: object
          additionalProperties: {}
          nullable: true
          description: 附加信息
      required:
      - code
      - data
      - message
    MyTeamContest:
      type: object
      properties:
        id:
          type: integer
          nullable: true
        slug:
          type: string
          nullable: true
        name:
          type: string
          nullable: true
        start_time:
          type: string
          format: date-time
          nullable: true
        end_time:
          type: string
          format: date-time
          nullable: true
    MyTeamItem:
      type: object
      properties:
        id:
          type: integer
          nullable: true
        name:
          type: string
          nullable: true
        invite_token:
          type: string
          nullable: true
        role:
          type: string
          nullable: true
        is_active:
          type: boolean
        joined_at:
          type: string
          format: date-time
          nullable: true
        status:
          type: string
          nullable: true
        contest:
          $ref: '#/components/schemas/MyTeamContest'
      required:
      - contest
    MyTeamsData:
      type: object
      properties:
        items:
          type: array
          items:
            $ref: '#/components/schemas/MyTeamItem'
      required:
      - items
    MyTeamsResponse:
      type: object
      properties:
        data:
          $ref: '#/components/schemas/MyTeamsData'
        code:
          type: integer
          description: 业务状态码，0 表示成功
        message:
          type: string
          description: 提示信息
        extra:
          type: object
          additionalProperties: {}
          nullable: true
          description: 附加信息
      required:
      - code
      - data
      - message
    NotificationItem:
      type: object
      properties:
        id:
          type: integer
        type:
          type: string
        title:
          type: string
        body:
          type: string
        payload:
          type: object
          additionalProperties: {}
        contest:
          type: string
          nullable: true
        team_id:
          type: integer
          nullable: true
        team_slug:
          type: string
          nullable: true
        challenge:
          type: string
          nullable: true
        read_at:
          type: string
          format: date-time
          nullable: true
        expires_at:
          type: string
          format: date-time
          nullable: true
        created_at:
          type: string
          format: date-time
      required:
      - body
      - created_at
      - id
      - title
      - type
    NotificationListData:
      type: object
      properties:
        items:
          $ref: '#/components/schemas/NotificationItem'
      required:
      - items
    NotificationListResponse:
      type: object
      properties:
        extra:
          $ref: '#/components/schemas/PaginationMeta'
        data:
          $ref: '#/components/schemas/NotificationListData'
        code:
          type: integer
          description: 业务状态码，0 表示成功
        message:
          type: string
          description: 提示信息
      required:
      - code
      - data
      - extra
      - message
    NotificationMarkAllReadData:
      type: object
      properties:
        updated:
          type: integer
          description: 被标记的通知数量
      required:
      - updated
    NotificationMarkAllReadResponse:
      type: object
      properties:
        data:
          $ref: '#/components/schemas/NotificationMarkAllReadData'
        code:
          type: integer
          description: 业务状态码，0 表示成功
        message:
          type: string
          description: 提示信息
        extra:
          type: object
          additionalProperties: {}
          nullable: true
          description: 附加信息
      required:
      - code
      - data
      - message
    NotificationMarkReadData:
      type: object
      properties:
        notification:
          $ref: '#/components/schemas/NotificationMarked'
      required:
      - notification
    NotificationMarkReadResponse:
      type: object
      properties:
        data:
          $ref: '#/components/schemas/NotificationMarkReadData'
        code:
          type: integer
          description: 业务状态码，0 表示成功
        message:
          type: string
          description: 提示信息
        extra:
          type: object
          additionalProperties: {}
          nullable: true
          description: 附加信息
      required:
      - code
      - data
      - message
    NotificationMarked:
      type: object
      properties:
        id:
          type: integer
      required:
      - id
    NotificationUnreadCountData:
      type: object
      properties:
        unread:
          type: integer
          description: 未读数量
      required:
      - unread
    NotificationUnreadCountResponse:
      type: object
      properties:
        data:
          $ref: '#/components/schemas/NotificationUnreadCountData'
        code:
          type: integer
          description: 业务状态码，0 表示成功
        message:
          type: string
          description: 提示信息
        extra:
          type: object
          additionalProperties: {}
          nullable: true
          description: 附加信息
      required:
      - code
      - data
      - message
    PaginationMeta:
      type: object
      properties:
        page:
          type: integer
          description: 当前页码（从 1 开始）
        page_size:
          type: integer
          description: 每页条数
        total:
          type: integer
          description: 总条数
        total_pages:
          type: integer
          nullable: true
          description: 总页数
        has_next:
          type: boolean
          description: 是否有下一页
        has_previous:
          type: boolean
          description: 是否有上一页
        next_page:
          type: integer
          nullable: true
          description: 下一页页码
        previous_page:
          type: integer
          nullable: true
          description: 上一页页码
      required:
      - has_next
      - has_previous
      - page
      - page_size
      - total
    PasswordReset:
      type: object
      properties:
        email:
          type: string
          format: email
        code:
          type: string
          description: 邮箱验证码
        new_password:
          type: string
        confirm_password:
          type: string
      required:
      - code
      - confirm_password
      - email
      - new_password
    PasswordResetRequest:
      type: object
      properties:
        email:
          type: string
          format: email
      required:
      - email
    PasswordResetResponse:
      type: object
      properties:
        code:
          type: integer
          description: 业务状态码，0 表示成功
        message:
          type: string
          description: 提示信息
        extra:
          type: object
          additionalProperties: {}
          nullable: true
          description: 附加信息
      required:
      - code
      - message
    PasswordResetSendData:
      type: object
      properties:
        sent:
          type: boolean
      required:
      - sent
    PasswordResetSendResponse:
      type: object
      properties:
        data:
          $ref: '#/components/schemas/PasswordResetSendData'
        code:
          type: integer
          description: 业务状态码，0 表示成功
        message:
          type: string
          description: 提示信息
        extra:
          type: object
          additionalProperties: {}
          nullable: true
          description: 附加信息
      required:
      - code
      - data
      - message
    PatchedProfileUpdate:
      type: object
      properties:
        nickname:
          type: string
        avatar:
          type: string
        bio:
          type: string
        organization:
          type: string
        country:
          type: string
        website:
          type: string
    PatchedRole:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        name:
          type: string
        is_builtin:
          type: boolean
          readOnly: true
        permissions:
          type: array
          items:
            type: string
    Permission:
      type: object
      properties:
        code:
          type: string
        category:
          type: string
        resource:
          type: string
        action:
          type: string
        admin_only:
          type: boolean
        user_default:
          type: boolean
      required:
      - action
      - admin_only
      - category
      - code
      - resource
      - user_default
    ProblemBankDetailData:
      type: object
      properties:
        bank:
          $ref: '#/components/schemas/ProblemBankSummary'
      required:
      - bank
    ProblemBankDetailResponse:
      type: object
      properties:
        data:
          $ref: '#/components/schemas/ProblemBankDetailData'
        code:
          type: integer
          description: 业务状态码，0 表示成功
        message:
          type: string
          description: 提示信息
        extra:
          type: object
          additionalProperties: {}
          nullable: true
          description: 附加信息
      required:
      - code
      - data
      - message
    ProblemBankListData:
      type: object
      properties:
        items:
          $ref: '#/components/schemas/ProblemBankSummary'
      required:
      - items
    ProblemBankListResponse:
      type: object
      properties:
        extra:
          $ref: '#/components/schemas/PaginationMeta'
        data:
          $ref: '#/components/schemas/ProblemBankListData'
        code:
          type: integer
          description: 业务状态码，0 表示成功
        message:
          type: string
          description: 提示信息
      required:
      - code
      - data
      - extra
      - message
    ProblemBankSummary:
      type: object
      properties:
        name:
          type: string
        slug:
          type: string
        description:
          type: string
        is_public:
          type: boolean
      required:
      - is_public
      - name
      - slug
    ProfileDetailData:
      type: object
      properties:
        user:
          $ref: '#/components/schemas/UserSummary'
      required:
      - user
    ProfileDetailResponse:
      type: object
      properties:
        data:
          $ref: '#/components/schemas/ProfileDetailData'
        code:
          type: integer
          description: 业务状态码，0 表示成功
        message:
          type: string
          description: 提示信息
        extra:
          type: object
          additionalProperties: {}
          nullable: true
          description: 附加信息
      required:
      - code
      - data
      - message
    ProfileUpdateData:
      type: object
      properties:
        user:
          $ref: '#/components/schemas/UserSummary'
      required:
      - user
    ProfileUpdateResponse:
      type: object
      properties:
        data:
          $ref: '#/components/schemas/ProfileUpdateData'
        code:
          type: integer
          description: 业务状态码，0 表示成功
        message:
          type: string
          description: 提示信息
        extra:
          type: object
          additionalProperties: {}
          nullable: true
          description: 附加信息
      required:
      - code
      - data
      - message
    PublicBrandData:
      type: object
      properties:
        brand:
          type: string
          description: 站点品牌名称，来自 SystemConfig 或 settings.SITE_BRAND
      required:
      - brand
    PublicBrandResponse:
      type: object
      properties:
        code:
          type: integer
        message:
          type: string
        data:
          $ref: '#/components/schemas/PublicBrandData'
      required:
      - code
      - data
      - message
    RegisterData:
      type: object
      properties:
        user:
          $ref: '#/components/schemas/UserSummary'
      required:
      - user
    RegisterRequest:
      type: object
      properties:
        username:
          type: string
        email:
          type: string
          format: email
        password:
          type: string
        confirm_password:
          type: string
        email_code:
          type: string
        nickname:
          type: string
      required:
      - confirm_password
      - email
      - email_code
      - password
      - username
    RegisterResponse:
      type: object
      properties:
        data:
          $ref: '#/components/schemas/RegisterData'
        code:
          type: integer
          description: 业务状态码，0 表示成功
        message:
          type: string
          description: 提示信息
        extra:
          type: object
          additionalProperties: {}
          nullable: true
          description: 附加信息
      required:
      - code
      - data
      - message
    Role:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        name:
          type: string
        is_builtin:
          type: boolean
          readOnly: true
        permissions:
          type: array
          items:
            type: string
      required:
      - id
      - is_builtin
      - name
      - permissions
    ScoreboardEntry:
      type: object
      properties:
        type:
          allOf:
          - $ref: '#/components/schemas/TypeEnum'
          description: |-
            榜单类型：team/user

            * `team` - team
            * `user` - user
        rank:
          type: integer
          description: 排名
        score:
          type: integer
          description: 总分
        bonus_score:
          type: integer
          description: 额外分数
        is_me:
          type: boolean
          nullable: true
          description: 是否为当前用户/队伍
        name:
          type: string
          description: 队伍或选手名称
        team_id:
          type: integer
          nullable: true
          description: 队伍 ID
        user_id:
          type: integer
          nullable: true
          description: 用户 ID
        solves:
          type: array
          items:
            $ref: '#/components/schemas/ScoreboardSolveEntry'
          description: 解题明细
        team:
          allOf:
          - $ref: '#/components/schemas/ScoreboardTeam'
          nullable: true
        user:
          allOf:
          - $ref: '#/components/schemas/ScoreboardUser'
          nullable: true
      required:
      - rank
      - score
      - solves
      - type
    ScoreboardSolveEntry:
      type: object
      properties:
        challenge:
          type: string
          description: 题目标识
        points:
          type: integer
          description: 得分
        bonus_points:
          type: integer
          description: 额外得分
        base_points:
          type: integer
          description: 基础得分
        solved_at:
          type: string
          description: 解题时间
      required:
      - challenge
      - points
    ScoreboardTeam:
      type: object
      properties:
        id:
          type: integer
        name:
          type: string
        slug:
          type: string
      required:
      - id
      - name
      - slug
    ScoreboardUser:
      type: object
      properties:
        id:
          type: integer
        username:
          type: string
      required:
      - id
      - username
    SendEmailCodeData:
      type: object
      properties:
        sent:
          type: boolean
          description: 是否发送成功
        expires_at:
          type: string
          format: date-time
          description: 验证码过期时间
        debug_code:
          type: string
          description: 调试验证码，仅 DEBUG 返回
      required:
      - expires_at
      - sent
    SendEmailCodeRequest:
      type: object
      properties:
        email:
          type: string
          format: email
          description: 接收验证码的邮箱
        scene:
          type: string
          description: 验证码场景，如 register/reset_password/bind_email/change_password
      required:
      - email
      - scene
    SendEmailCodeResponse:
      type: object
      properties:
        data:
          $ref: '#/components/schemas/SendEmailCodeData'
        code:
          type: integer
          description: 业务状态码，0 表示成功
        message:
          type: string
          description: 提示信息
        extra:
          type: object
          additionalProperties: {}
          nullable: true
          description: 附加信息
      required:
      - code
      - data
      - message
    SubmissionPayload:
      type: object
      properties:
        id:
          type: integer
        status:
          type: string
          description: 提交状态
        is_correct:
          type: boolean
        awarded_points:
          type: integer
        bonus_points:
          type: integer
        blood_rank:
          type: integer
          nullable: true
        message:
          type: string
        created_at:
          type: string
          format: date-time
    TeamCreateData:
      type: object
      properties:
        team:
          $ref: '#/components/schemas/TeamSummary'
      required:
      - team
    TeamCreateRequest:
      type: object
      properties:
        name:
          type: string
          description: 队伍名称
        description:
          type: string
          description: 队伍简介
      required:
      - name
    TeamCreateResponse:
      type: object
      properties:
        data:
          $ref: '#/components/schemas/TeamCreateData'
        code:
          type: integer
          description: 业务状态码，0 表示成功
        message:
          type: string
          description: 提示信息
        extra:
          type: object
          additionalProperties: {}
          nullable: true
          description: 附加信息
      required:
      - code
      - data
      - message
    TeamDisbandData:
      type: object
      properties:
        team:
          $ref: '#/components/schemas/TeamSummary'
      required:
      - team
    TeamDisbandResponse:
      type: object
      properties:
        data:
          $ref: '#/components/schemas/TeamDisbandData'
        code:
          type: integer
          description: 业务状态码，0 表示成功
        message:
          type: string
          description: 提示信息
        extra:
          type: object
          additionalProperties: {}
          nullable: true
          description: 附加信息
      required:
      - code
      - data
      - message
    TeamInviteResetData:
      type: object
      properties:
        team:
          $ref: '#/components/schemas/TeamSummary'
      required:
      - team
    TeamInviteResetResponse:
      type: object
      properties:
        data:
          $ref: '#/components/schemas/TeamInviteResetData'
        code:
          type: integer
          description: 业务状态码，0 表示成功
        message:
          type: string
          description: 提示信息
        extra:
          type: object
          additionalProperties: {}
          nullable: true
          description: 附加信息
      required:
      - code
      - data
      - message
    TeamJoinData:
      type: object
      properties:
        team:
          $ref: '#/components/schemas/TeamSummary'
      required:
      - team
    TeamJoinRequest:
      type: object
      properties:
        invite_token:
          type: string
          description: 队伍邀请码
      required:
      - invite_token
    TeamJoinResponse:
      type: object
      properties:
        data:
          $ref: '#/components/schemas/TeamJoinData'
        code:
          type: integer
          description: 业务状态码，0 表示成功
        message:
          type: string
          description: 提示信息
        extra:
          type: object
          additionalProperties: {}
          nullable: true
          description: 附加信息
      required:
      - code
      - data
      - message
    TeamLeaveResponse:
      type: object
      properties:
        code:
          type: integer
          description: 业务状态码，0 表示成功
        message:
          type: string
          description: 提示信息
        extra:
          type: object
          additionalProperties: {}
          nullable: true
          description: 附加信息
      required:
      - code
      - message
    TeamSummary:
      type: object
      properties:
        id:
          type: integer
          description: 队伍 ID
        contest:
          type: string
          description: 比赛标识
        name:
          type: string
          description: 队伍名称
        slug:
          type: string
          description: 队伍标识
        captain_id:
          type: integer
          description: 队长用户 ID
        member_count:
          type: integer
          description: 队伍人数
        is_active:
          type: boolean
          description: 是否有效
        description:
          type: string
          description: 队伍简介
        invite_token:
          type: string
          description: 队伍邀请码
      required:
      - captain_id
      - contest
      - id
      - is_active
      - member_count
      - name
      - slug
    TeamTransferData:
      type: object
      properties:
        team:
          $ref: '#/components/schemas/TeamSummary'
      required:
      - team
    TeamTransferRequest:
      type: object
      properties:
        new_captain_id:
          type: integer
          description: 新队长用户 ID
      required:
      - new_captain_id
    TeamTransferResponse:
      type: object
      properties:
        data:
          $ref: '#/components/schemas/TeamTransferData'
        code:
          type: integer
          description: 业务状态码，0 表示成功
        message:
          type: string
          description: 提示信息
        extra:
          type: object
          additionalProperties: {}
          nullable: true
          description: 附加信息
      required:
      - code
      - data
      - message
    TokenRefreshData:
      type: object
      properties:
        user:
          $ref: '#/components/schemas/UserSummary'
        access:
          type: string
          description: 新的访问令牌
        refresh:
          type: string
          description: 刷新令牌，可继续使用
      required:
      - access
      - refresh
      - user
    TokenRefreshRequest:
      type: object
      properties:
        refresh:
          type: string
          description: 刷新令牌
      required:
      - refresh
    TokenRefreshResponse:
      type: object
      properties:
        data:
          $ref: '#/components/schemas/TokenRefreshData'
        code:
          type: integer
          description: 业务状态码，0 表示成功
        message:
          type: string
          description: 提示信息
        extra:
          type: object
          additionalProperties: {}
          nullable: true
          description: 附加信息
      required:
      - code
      - data
      - message
    TypeEnum:
      enum:
      - team
      - user
      type: string
      description: |-
        * `team` - team
        * `user` - user
    UserSummary:
      type: object
      properties:
        id:
          type: integer
        username:
          type: string
        email:
          type: string
          format: email
        nickname:
          type: string
        avatar:
          type: string
          nullable: true
        is_email_verified:
          type: boolean
        permissions:
          type: array
          items:
            type: string
          description: 权限概览（中文标签）
      required:
      - email
      - username
  securitySchemes:
    JWTAuth:
      type: http
      scheme: bearer
tags:
- name: accounts-auth
  description: 角色与权限
- name: accounts-password
  description: 密码修改与重置
- name: accounts-email
  description: 账户邮箱管理
- name: accounts-profile
  description: 个人资料管理
- name: contests
  description: 比赛管理
- name: challenges
  description: 题目管理与提示
- name: submissions
  description: 提交判题与记录
- name: machines
  description: 靶机管理
- name: problem-bank
  description: 题库管理
- name: teams
  description: 队伍管理
- name: system
  description: 系统配置
- name: health
  description: 健康检查
